---
layout: default
title: Метод Friends.GetOnline
permalink: friends/getOnline/
comments: true
---
# Метод Friends.GetOnline
Возвращает список идентификаторов друзей пользователя, находящихся на сайте.

Этот метод можно вызвать с [ключом доступа пользователя](https://vk.com/dev/access_token). Требуются [права доступа](https://vk.com/dev/permissions): **friends**.

Страница документации ВКонтакте [friends.getOnline](https://vk.com/dev/friends.getOnline).

## Синтаксис
``` csharp
public FriendOnline GetOnline(FriendsGetOnlineParams @params)
```

## Параметры
Класс **`FriendsGetOnlineParams`** содержит следующие свойства:

+ **user_id** — идентификатор пользователя, для которого необходимо получить список друзей онлайн. Если параметр не задан, то считается, что он равен идентификатору текущего пользователя.
+ **list_id** — идентификатор списка друзей. Если параметр не задан, возвращается информация обо всех друзьях, находящихся на сайте.
+ **online_mobile** — *1* — будет возвращено дополнительное поле *online_mobile*. 
По умолчанию — *0*. Флаг, может принимать значения *1* или *0*
+ **order** — порядок, в котором нужно вернуть список друзей, находящихся на сайте. Допустимые значения: random - возвращает друзей в случайном порядке, *hints* - сортировать по рейтингу, аналогично тому, как друзья сортируются в разделе **Мои друзья** (данный параметр доступен только для [Desktop-приложений](https://vk.com/dev/standalone)). По умолчанию список сортируется в порядке возрастания идентификаторов пользователей. 
+ **count** — количество друзей онлайн, которое нужно вернуть. (по умолчанию – все друзья онлайн).
+ **offset** — смещение, необходимое для выборки определенного подмножества друзей онлайн.

## Результат
После успешного выполнения возвращает список идентификаторов (**id**) друзей, находящихся сейчас на сайте, у пользователя с идентификатором *uid* и входящих в список с идентификатором *lid*. 
При использовании параметра *online_mobile=1* также возвращается поле *online_mobile*, содержащее список идентификатор друзей, находящихся на сайте с мобильного устройства.

## Исключения
+ **30** - This profile is private.
+ В ходе выполнения могут произойти общие ошибки. Их описание находится на [отдельной странице](https://vk.com/dev/errors).

## Пример
```csharp
// Получение идентификаторов находящихся онлайн друзей Павла Дурова.
var online = api.Friends.GetOnline(new VkNet.Model.RequestParams.FriendsGetOnlineParams
{
    ListId = 1,
    UserId = 1,
    OnlineMobile = true // online с мобильного устройства
});

// Друзья пользователя online с ПК
foreach (var item in online.Online)
{
	//logic
}

// Друзья пользователя online с мобильного устройства
foreach (var item in online.MobileOnline)
{
	//logic
}
```

## Версия Вконтакте API v.5.103
Дата обновления: 17.01.2020 16:38.
